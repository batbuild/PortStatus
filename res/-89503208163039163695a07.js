
/*---
/js/bs/blocks.js
---*/
BS.Blocks=Class.create({_blocks:{},blocksType:"",collapsedByDefault:true,mustPersistState:true,initialize:function(){this._blocks={};},getBlockContentElement:function(a){},onHideBlock:function(a,b){},onShowBlock:function(a,b){},toggleBlock:function(b,a){this._realToggle(b,a);this._saveState();},restoreSavedBlocks:function(){if(!this.mustPersistState){return;}var b=BS.Blocks._saved[this.blocksType];if(!b){return;}var c=b.split(":");for(var a=0;a<c.length;a++){if(c[a]&&c[a]!="null"){this.changeState(c[a],true,this.collapsedByDefault);}}},_saveState:function(){if(!this.mustPersistState){return;}var b="";for(var a in this._blocks){b+=a+":";}BS.ajaxRequest(window["base_uri"]+"/ajax.html",{parameters:"blocksType="+this.blocksType+"&state="+b});},_realToggle:function(d,a,b){b=b||"";var c=this.getBlockContentElement(d);if(!c){return;}BS.blockRefreshTemporary();if(b=="collapse"||this.isVisible(c)){this.changeState(d,a,false);}else{if(b=="expand"||!this.isVisible(c)){this.changeState(d,a,true);}}c=null;},isExpanded:function(b){var a=this.getBlockContentElement(b);if(!a){return false;}return this.isVisible(a);},changeState:function(d,a,b){var c=this.getBlockContentElement(d);if(!c){return;}if(b){this.doShow(d,c);if(this.collapsedByDefault){this._addBlockData(d);}else{this._deleteBlockData(d);}this.onShowBlock(c,d);}else{this.doHide(d,c);if(this.collapsedByDefault){this._deleteBlockData(d);}else{this._addBlockData(d);}this.onHideBlock(c,d);}},isVisible:function(a){return BS.Util.visible(a);},doShow:function(b,a){BS.Util.show(a);},doHide:function(b,a){BS.Util.hide(a);},_addBlockData:function(a){this._blocks[a]=true;},_deleteBlockData:function(a){delete this._blocks[a];}});BS.Blocks._saved={};BS.BaseMultiElementBlocks=new (Class.create(BS.Blocks,{collapsedIcon:"",expandedIcon:"",iterateHandles:function(b,a){},iterateBlocks:function(a){},collapseAll:function(){var a=this;this.iterateBlocks(function(b){if(a.isExpanded(b)){a._realToggle(b,true,"collapse");}});this._saveState();},expandAll:function(){var a=this;this.iterateBlocks(function(b){if(!a.isExpanded(b)){a._realToggle(b,true,"expand");}});this._saveState();},isVisible:function(a){return a.length&&BS.Util.visible(a[0]);},doShow:function(c,a){a.each(function(){BS.Util.show(this);});var b=this;this.iterateHandles(c,function(d){if(d){d.src=window["base_uri"]+b.expandedIcon;}});},doHide:function(c,a){a.each(function(){BS.Util.hide(this);});var b=this;this.iterateHandles(c,function(d){if(d){d.src=window["base_uri"]+b.collapsedIcon;}});}}))();;
/*---
/js/bs/blockWithHandle.js
---*/
BS.BlockWithHandle=Class.create(BS.Blocks,{isRetina:Retina.isRetina(),initialize:function($super,c,b,e,d){var a;$super();this.blocksType=c+b;this.blockId=b;this.collapsedByDefault=e;if(!(a=this.getHandle())){return;}this._cssOnly=a.hasClassName("handle_collapsed")||a.hasClassName("handle_expanded");this.getHandle().on("mousedown",function(f){Event.stop(f);});this.getHandle().on("click",this.toggle.bindAsEventListener(this));if(!d){this.changeState(this.blockId,true,!this.collapsedByDefault);this.restoreSavedBlocks();}},getId:function(){return this.blockId;},getHandle:function(){return $("blockHandle"+this.blockId);},toggle:function(){if(!this.getBlockContentElement(this.blockId)){this.getHandle().hide();return;}BS.blockRefreshTemporary();this.getHandle().show();if(this._cssOnly&&this.getHandle().hasClassName("handle_expanded")){this.hideBlock();}else{if(!this._cssOnly&&this.getHandle().getStyle("background-image").indexOf("img/"+this.collapsedIcon())<0){this.hideBlock();}else{this.showBlock();}}},showBlock:function(){this.changeState(this.blockId,true,true);this._saveState();},hideBlock:function(){this.changeState(this.blockId,true,false);this._saveState();},onHideBlock:function(){if(this._cssOnly){this.getHandle().removeClassName("handle_expanded").addClassName("handle_collapsed");}else{this.getHandle().style.backgroundImage="url("+window["base_uri"]+"/img/"+this.collapsedIcon()+")";}},onShowBlock:function(){if(this._cssOnly){this.getHandle().removeClassName("handle_collapsed").addClassName("handle_expanded");}else{this.getHandle().style.backgroundImage="url("+window["base_uri"]+"/img/"+this.expandedIcon()+")";}},collapsedIcon:function(){return(this.isRetina?"handle/blockCollapsed@2x.png":"handle/blockCollapsed.png");},expandedIcon:function(){return(this.isRetina?"handle/blockExpanded@2x.png":"handle/blockExpanded.png");},getBlockContentElement:function(){return $("btb"+this.blockId);},_deleteBlockData:function(){this._blocks={};},_addBlockData:function(){this._blocks["_"]=true;}});(function(a){a.fn.make_collapsable=function(b){b=b||{};var d=b["registerForExpandAll"];var c=b["onStateChange"]||Prototype.emptyFunction;this.each(function(){if(this._simple_block){return;}$(this).identify();this._simple_block=new BS.SimpleBlock(this,this.getAttribute("data-blockId"),this.getAttribute("data-collapsedByDefault"),c);if(d){BS.CollapsableBlocks.registerBlock(this._simple_block,d);}});return this;};})(jQuery);BS.SimpleBlock=Class.create(BS.BlockWithHandle,{initialize:function($super,b,a,d,c){this.elementId=b.identify();this.onStateChange=c;if(!a){a=this.elementId;}$super(a,"",d);},getId:function(){return this.elementId;},getHandle:function(){return $(this.elementId).down(".handle");},getBlockContentElement:function(a){if(!$(this.elementId)){BS.Log.warn("Cannot find block element "+this.elementId);}return $(this.elementId).next();},onShowBlock:function($super,a,b){$super(a,b);$(this.elementId).addClassName("exp");this.onStateChange($(this.elementId),true);},onHideBlock:function($super,a,b){$super(a,b);$(this.elementId).removeClassName("exp");this.onStateChange($(this.elementId),false);}});BS.MultilineBlock=Class.create(BS.BlockWithHandle,{initialize:function($super,b,a,c,d){if(typeof d==="undefined"){d=false;}this.mustPersistState=d;$super(b,a,c,true);},getBlockContentElement:function(){return jQuery('[id="btb'+this.blockId+'"]');}});BS.BuildTypeBlock=Class.create(BS.BlockWithHandle,{initialize:function($super,b,a,c){this._collapsedIcon=c;this.headerId=a+"-div";$super(b,a);},onShowBlock:function($super,a,b){$super(a,b);this.updateHeader(true);},onHideBlock:function($super,a,b){$super(a,b);this.updateHeader(false);},expandedIcon:function(){var a=this._collapsedIcon.replace("@2x","").replace(/\.png$/,"Expanded.png");if(this.isRetina){a=a.replace(/\.\w+$/,function(b){return"@2x"+b;});}return a;},collapsedIcon:function(){var a=this._collapsedIcon.replace("@2x","");if(this.isRetina){a=a.replace(/\.\w+$/,function(b){return"@2x"+b;});}return a;},updateHeader:function(b){var e=BS.Util.escapeId(this.headerId),d=$j(e);if(d.length){d.toggleClass("exp");var c=d.find(".problemsSummary");if(b){c.hide();}else{c.show();}if(!b&&!c.length&&BS.ProblemsSummary){var a=this.blockId;BS.ProblemsSummary.requestBuildTypeUpdate(a);}}else{BS.Log.info("Could not find element "+this.headerId);}}});BS.ProjectBlock=Class.create(BS.BlockWithHandle,{initialize:function($super,b,a,e,c,d){this._collapsedIcon=c;this.projectId=a.substr("ovr_".length);this.projectExternalId=e;$super(b,a,d);this.clickOnHeaderShouldToggle();this._initialized=true;},clickOnHeaderShouldToggle:function(){var a=$("p_"+this.projectId).down(".projectHeader");a.on("mousedown",function(b){Event.stop(b);});a.on("click",function(c){var b=Event.element(c);if(b.className.indexOf("handle")==-1&&b.tagName!="A"){this.toggle();Event.stop(c);}}.bindAsEventListener(this));},onShowBlock:function($super,b,d){var a=this.projectId;var c=this.projectExternalId;if(this._initialized&&BS.lazyLoadProject){BS.lazyLoadProject(a,c,!this.collapsedByDefault);}$super(b,d);jQuery("#ph_"+a).addClass("exp");},onHideBlock:function($super,b,c){$super(b,c);var a=this.projectId;jQuery("#ph_"+a).removeClass("exp");},expandedIcon:function(){var a=this._collapsedIcon.replace("@2x","").replace(/\.png$/,"Expanded.png");if(this.isRetina){a=a.replace(/\.\w+$/,function(b){return"@2x"+b;});}return a;},collapsedIcon:function(){var a=this._collapsedIcon.replace("@2x","");if(this.isRetina){a=a.replace(/\.\w+$/,function(b){return"@2x"+b;});}return a;}});;
/*---
/js/bs/overview.js
---*/
BS.Projects={_projectUpdateUrl:"/overview.html",updateProjectView:function(a,e,b,c,d){BS.reload(!!c,function(){BS.Projects._updateProjectView("p_"+a,e,b,d);});},_updateProjectView:function(a,f,c,e){e=e||{};BS.Branch.addBranchToParams(e,f);var d=$H(_.extend(e,{projectId:f,firstProjectInList:!!c,refreshProject:"1"}));var b=window["base_uri"]+BS.Projects._projectUpdateUrl;BS.ajaxUpdater(a,b,{parameters:d.toQueryString(),evalScripts:true,insertion:function(h,i){var g=$j(i);!$j(h).is(":visible")&&g.hide();BS.stopObservingInContainers(h);$j(h).replaceWith(g);BS.SystemProblems.updateNow();}});},hideProject:function(a){BS.ajaxRequest("ajax.html?hideProject="+a,{onSuccess:function(){var b=$("p_"+a);new Effect.Fade(b,{afterFinish:function(){b.remove();var d=$("buildTypes").getElementsByTagName("DIV");for(var c=0;c<d.length;c++){if(d[c].className=="projectHeader"){return;}}new Effect.Highlight("configVisibleProjects");}});}});return false;},addNewProject:function(a){this.markProject(a,true);return this.addOrHideProject("addProject",a,"new_"+a,true);},hideNewProject:function(a){this.markProject(a,false);return this.addOrHideProject("hideProject",a,"new_"+a,false);},addAllProjects:function(a){a=this.filterMarked(a,false);return this.addOrHideProject("addProject",a,"new-projects",true);},hideAllProjects:function(a){a=this.filterMarked(a,true);return this.addOrHideProject("hideProject",a,"new-projects",false);},markProject:function(a,b){if(!this._marked){this._marked=[];}this._marked.push([a,b]);},filterMarked:function(a,c){if(this._marked){for(var b=0;b<this._marked.length;++b){var d=this._marked[b];if(d[1]==c){a=a.replace(d[0]+",","");}}}return a;},addOrHideProject:function(d,a,c,b){BS.ajaxRequest("ajax.html",{parameters:d+"="+a,onSuccess:function(){if(b){if($("overviewMain")){$("overviewMain").refresh();}else{BS.reload(true);return;}}var f=jQuery("#new-projects-list .entry").filter(":visible").length;if(c!="new-projects"&&f==1){new Effect.Fade("new-projects",{afterFinish:function(){new Effect.Highlight("configVisibleProjects");}});}else{new Effect.Fade(c);}var e=$j(BS.Util.escapeId(c)).find(".pc").attr("id")+"Content";if((c=="new-projects"||f==1)&&$(e)){new Effect.Fade(e);}}});return false;},installShowHideLink:function(b,a){var c=$j("<a/>").attr({href:"#","class":"btn btn_mini pinLink",title:b?"Project is shown on the overview page. Click to hide":"Click to show project on the overview page"}).click(function(){return BS.AllProjectsPopup.toggleOverview(this,a,{loadingTop:2,loadingLeft:32,updateParent:false});});$j("<i/>").attr({"class":"icon16 icon16_watched"+(b?"":" icon16_watched_no")}).appendTo(c);c.prependTo("#topWrapper .quickLinks");c.wrap('<div class="toolbarItem"/>');}};jQuery(function(a){BS.lazyLoadProject=function(d,f,b){var c="btbovr_"+d,e=a(BS.Util.escapeId(c));if(!a.trim(e.html())&&e.is(":visible")){e.html("<span style='margin: 0.5em;'>"+BS.loadingIcon+"&nbsp;Loading...</span>");BS.Projects.updateProjectView(d,f,b,true,{force_show_build_types:true});}};});;
/*---
/js/bs/runningBuilds.js
---*/
BS.RunningBuilds={subscribeOnBuild:function(a){BS.SubscriptionManager.subscribe("rb/"+a,function(e){var b=JSON.parse(e);if(!b){return;}var d=b.a;var c=b.b;BS.RunningBuilds.processNode(b,d);if(BS.ProblemsSummary){BS.ProblemsSummary.requestBuildTypeUpdate(c);}});},unsubscribeFromBuild:function(a){BS.SubscriptionManager.unsubscribe("rb/"+a);},processNode:function(b,a){this.updateStatusIcon(b,a);this.updateDescription(b,a);this.updateDuration(b,a);this.updateProgress(b,a);this.updateArtifactsLink(b,a);this.updateBuildTypeStatus(b);},findNestedDiv:function(a){return $(a.getElementsByTagName("div")[0]);},updateStatusIcon:function(f,d){var e=$("build:"+d+":img");if(e){var g=f.d;var a=f.f;var c=e.src;if(a){if(g){c=c.replace("personalRunningFailing.gif","personalRunning.gif");}else{c=c.replace("personalRunning.gif","personalRunningFailing.gif");}}else{c=window["base_uri"]+"/img/buildStates/"+(g?"running_green_transparent.gif":"running_red_transparent.gif");}var b=e.src;if(b!=c&&b.replace(/@2x/,"")!=c){e.src=c;}BS.updateRetinaImage(e);}},updateDescription:function(c,a){var d=$("build:"+a+":text");if(d){var b=c.c;b=b.escapeHTML();if(b.length>100){b=b.substring(0,100)+"&hellip;";}d.innerHTML=b;}},updateDuration:function(c,b){var a=c.m;var d=$("build:"+b+":duration");if(d){d.innerHTML=a;}},updateProgress:function(b,a){this.doUpdateProgress(a,true,b.m,b.j,b.k,b.l,b.h,b.g,b.i,b.d,b.n);},doUpdateProgress:function(i,f,h,n,j,g,a,l,b,o,q){var k=$("build:"+i);if(k==null){return;}var p=k.select(".progress")[0];var m=k.select(".start_date")[0];if(p&&m){var r="Started: "+m.innerHTML+"<br>"+h+" passed";if(n){r+=" of "+n+" initially estimated";}var e=this.findNestedDiv(p);if(e){if("N/A"==j){if(f){e.style.width="100%";}}else{if(a){BS.Util.show($("build:"+i+":overtime_icon"));}else{BS.Util.hide($("build:"+i+":overtime_icon"));}if(b){r+="<br>"+(a?"more than ":"")+j+" left";}if(a){r+="<br>"+g+" overtime";}if(f){if(l){e=this.setTextInProgress(p,"overtime: "+g);}else{e=this.setTextInProgress(p,j+" left");}e.removeClassName("progressInnerSuccessful");e.removeClassName("progressInnerFailed");e.addClassName(o?"progressInnerSuccessful":"progressInnerFailed");e.style.width=q+"%";}}}var d=$("aLink:"+i);if(d&&d.innerHTML!=""){r+="<br>Agent: "+d.innerHTML;}var c=p.id;p._title=r;if(!p._eventsBound){k.on("mouseenter",function(){BS.Tooltip.showMessage($(c),{shift:{x:10,y:20}},$(c)._title);});k.on("mouseleave",function(){BS.Tooltip.hidePopup();});p._eventsBound=true;}}},setTextInProgress:function(a,c){var b="&nbsp;&nbsp;"+c.replace(/ /g,"&nbsp;");a.innerHTML=b+"<div class='progressInner'>"+b+"</div>";return this.findNestedDiv(a);},updateArtifactsLink:function(e,d){var a=e.o===true;if(a){var c=$("build:"+d+":artifactsLink");var b=$("build:"+d+":noArtifactsText");if(c&&b){c.style.display="inline";b.style.display="none";}}},updateBuildTypeStatus:function(c){var b=c.b;var a=$j("#mainNavigation").children(".buildType");if(a.attr("data-buildTypeId")==b){a.toggleClass("failed",!c.e);}}};;
/*---
/js/bs/testGroup.js
---*/
BS.TestGroup={_data:{},_projectData:{},initialize:function(d,f,h){BS.TestGroup.initEventHandlers(d);if(!f){return;}var a=this._data[d]={};for(var c=0;c<f.length;++c){var e=f[c];if(!e){continue;}var b=e[0],g=e[1];a[b]=g;}this._projectData[d]=h||"_Root";},initEventHandlers:function(c){var d=jQuery(BS.Util.escapeId(c));var b=function(e){e.find("table.testList").each(function(){var g=jQuery(this);if(g.find("input").length==0){var f=g.prev();f.find(".multi-select").css({visibility:"hidden"});}});};var a=function(e){e.find("div.subgroups").each(function(){var g=jQuery(this);var h=true;g.find(".multi-select").each(function(){var i=jQuery(this);if(h&&i.css("visibility")!="hidden"){h=false;}});if(h){var f=g.prev();f.find(".multi-select").css({visibility:"hidden"});}});};b(d);a(d);d.on("click",".multi-select",function(i){var g=jQuery(this),f=g.parent().next(),h=g.find(".custom-checkbox_input").prop("checked"),e=f.find(".custom-checkbox").not(g);e.find(".custom-checkbox_input").prop("checked",!!h);e.change();});d.on("change","input[type=checkbox]",function(){var e=jQuery(BS.Util.escapeId(c)+"-actions-docked");var f=jQuery(this);_.delay(function(){var g=jQuery(BS.Util.escapeId(c)).find(".checkbox.custom-checkbox_checked").length>0;if(g){BS.blockRefreshPermanently("test");if(!e.is(":visible")){e.css("bottom","-100px").show().animate({bottom:0});}}else{BS.unblockRefresh("test");e.css({bottom:"-100px"}).hide();}var i=f.prop("checked");if(f.parent().hasClass("multi-select")){var h=f.closest(".group-name").next(".testList");h.toggleClass("testListSelected",i);if(!i){h.find(".testRowSelected").removeClass("testRowSelected");}}else{f.closest("tr").toggleClass("testRowSelected",i);}},10);});},findProjectIdByGroupId:function(a){return a?this._projectData[a]:null;},investigateSelected:function(c,d){var b=this._getSelectedData(c);if(b){this.hideError();var a=$j(c).attr("id");var e=a?this._projectData[a]:0;if(e){b["projectId"]=e;}BS.BulkInvestigateMuteTestDialog.show(b,d);}else{this.error(c,"Nothing is selected");}return false;},error:function(b,c){if(jQuery("#test-group-error").length==0){jQuery("body").append("<div class='successMessage' id='test-group-error'></div>");}jQuery("#test-group-error").html(c).css({position:"absolute",display:"block"}).position({my:"top",at:"top",of:jQuery(b),offset:"0 5"});var a=this;setTimeout(function(){a.hideError();},10000);},hideError:function(){jQuery("#test-group-error").fadeOut();},_getSelectedData:function(d){d=jQuery(d);var c=this._data[d.attr("id")];if(!c){alert("Failed to get tests group data");return null;}var a=d.find("div.group-div").filter(":visible").find(".custom-checkbox_checked").filter(":not(.multi-select)");if(a.length==0){return null;}var b={};a.each(function(){var e=jQuery(this);var f=e.find(".custom-checkbox_input").attr("data-testId");b[f]=c[f];});return b;},_getProjectExternalId:function(a){a=jQuery(a);return this._projectData[a.attr("id")];},highlight_multiple_bt_group:function(c,e){var d=$(c).up("div.group-div");d.down("div")._simple_block.changeState("",true,true);var a=d.select("div.subgroups div.group-name");for(var b=0;b<a.length;b++){var f=a[b];if(f.getAttribute("data-blockId")==e){new Effect.ScrollTo(f);f.highlight({duration:2});return;}}},regroup:function(b,f,a){BS.User.setSessionProperty(f,a.options[a.selectedIndex].value);BS.CollapsableBlocks.unregisterBlocks("expand_"+b);var e=jQuery(BS.Util.escapeId(b)),d=this.saveState(e),c=this;$(b+"Refresh").refresh(b+"_loading",null,function(){e=jQuery(BS.Util.escapeId(b));c.restoreState(e,d);});return true;},saveState:function(a){return{selected:_.keys(this._getSelectedData(a)||{})};},restoreState:function(d,c){var b=c.selected;for(var a=0;a<b.length;++a){d.find("input[data-testId="+b[a]+"]").prop("checked",true).parent().change();}},toggleSelectAll:function(b,e){var f=jQuery(b),a=f.find(".custom-checkbox");var c=jQuery(e),d=c.prop("checked");a.find(".custom-checkbox_input").not(c).prop("checked",!!d);a.not(c.parent()).change();}};;
/*---
/js/bs/systemProblemsMonitor.js
---*/
BS.SystemProblems={problemIds:{},_problemType:null,_options:{},_lastFailures:{},startUpdates:function(a){this._problemType=a;this.updateNow(true);},setOptions:function(a){this._options=a;},updateNow:function(f){var e=this;var c=this._options;var d=this._problemType;var a=this._options.perBranch;var b=BS.Branch.getAllBranchesFromUrl();var g=$j.extend({},b);g["getSystemProblems"]="true";if(d){g["problemType"]=d;}if(a){g["allProblems"]=true;}if(c.btId){g["btId"]=c.btId;}if(c.projectId){g["projectId"]=c.projectId;}if(c.overview){g["overview"]=true;}BS.ajaxRequest(window["base_uri"]+"/ajax.html",{parameters:g,evalScripts:false,onSuccess:function(n){try{var r=BS.Util.documentRoot(n);if(!r){return;}var j=r.childNodes;var k={};var p={};var o,m,h,l;BS.SystemProblems.cleanRemovedProblems();if(a){e._handleProblemsPerBranch(j,c.btId);return;}for(o=0;o<j.length;o++){m=j[o];h=m.getAttribute("id");k[h]=m.getAttribute("text");p[h]=parseInt(m.getAttribute("problemCount"));if(!k[h]){k[h]="Configuration problems found";}}for(l in e._lastFailures){if(k[l]===undefined){BS.SystemProblems.hideProblems(l);}}e._lastFailures=k;for(l in e._lastFailures){if(k[l]!==undefined){BS.SystemProblems.showProblems(l,k[l],p[l]);}}if(f){setTimeout(function(){e.updateNow(true);},BS.internalProperty("teamcity.ui.systemProblems.pollInterval")*1000);}}catch(q){BS.Log.warn(q);}}});},cleanRemovedProblems:function(){var b,a,c,d;for(b in BS.SystemProblems.problemIds){a=BS.SystemProblems.problemIds[b];d=[];if(a){for(c=0;c<a.length;c++){if($("buildType:"+a[c]+":systemProblems")){d.push(a[c]);}}if(d.length<a.length){BS.SystemProblems.problemIds[b]=d;}}}},hideProblems:function(b){var a=BS.SystemProblems.getProblemElements(b),c;for(c=0;c<a.length;c++){BS.Util.hide(a[c].problemElement);}if(BS.ProblemsSummary){BS.ProblemsSummary.requestBuildTypeUpdate(b);}},showProblems:function(c,a,e){var b=BS.SystemProblems.getProblemElements(c),d;for(d=0;d<b.length;d++){BS.SystemProblems.updateErrText(b[d].problemTextElement,a,e);BS.Util.show(b[d].problemElement);}if(BS.ProblemsSummary){BS.ProblemsSummary.hideSummaryFor(c);}},getProblemElements:function(b){var a=this.problemIds[b];if(a){return jQuery.map(a,function(c){return{problemElement:$("buildType:"+c+":systemProblems"),problemTextElement:$("buildType:"+c+":systemProblemsText")};});}else{return[];}},registerProblemId:function(a,c){var b=this.problemIds[a];if(b){b.push(c);}else{this.problemIds[a]=[c];}},updateErrText:function(c,a,d){if(!c){return;}a=a.escapeHTML();var b=parseInt(c.getAttribute("data-maxWidth"));c.title=a.length>b?a:"";if(a.length>b){a=a.substr(0,b)+"&hellip;";}if(d>1){a+=" (and "+(d-1)+" more)";}c.update(a);},_handleProblemsPerBranch:function(b,a){if(!b||!b.length){return;}this.hideProblems(a);var h=[];for(var d=0;d<b.length;d++){var c=b[d];var j=c.getAttribute("id");if(a!=j){continue;}var g=c.getAttribute("text")||"Configuration problems found";var f=c.getAttribute("additional");h[f]=g;}var e=this;$j(".systemProblemsBar[data-build-type='"+a+"']").each(function(){var i=this.getAttribute("data-branch");var k=h[i];if(k){$j(this).show();e.updateErrText($j(this).children(".systemProblemsBarText")[0],k,0);}});}};BS.SystemProblemsPopup=new BS.Popup("systemProblemDetails",{url:window["base_uri"]+"/systemProblems.html",method:"get",delay:0,hideDelay:-1});BS.SystemProblemsPopup.showDetails=function(a,d,c,g,b){if(this.isShown()){this.hidePopup();return;}var f="buildTypeId="+a;if(d!=null&&d!=""){f+="&problemType="+encodeURIComponent(d);}if(c!=null&&c!=""){f+="&problemSource="+encodeURIComponent(c);}var e=$j(b).parent().attr("data-branch");if(e!=null&&e!=undefined){if(e=="<default>"){e="";}f+="&additional="+encodeURIComponent(e);}f+="&showHead="+g;this.options.parameters=f;this.options.shift={x:0,y:b.parentNode.offsetHeight-2};this.showPopupNearElement(b.parentNode);};;
/*---
/js/bs/collapseExpand.js
---*/
BS.CollapsableBlocks={registerBlock:function(c,a){var b=this._blocks(a);var d=c.getId();b[d]=c;},unregisterBlocks:function(a){if(a){delete this._allBlocks[a];}},collapseAll:function(a,b){var c=this._blocks(b);for(var d in c){if(!c.hasOwnProperty(d)){continue;}if(c[d].isExpanded(d)){c[d].changeState(d,true,false);if(a){c[d]._saveState();}}}return false;},expandAll:function(a,b){var c=this._blocks(b);for(var d in c){if(!c.hasOwnProperty(d)){continue;}if(!c[d].isExpanded(d)){c[d].changeState(d,true,true);if(a){c[d]._saveState();}}}return false;},_blocks:function(a){a=a||"default";this._allBlocks[a]=this._allBlocks[a]||{};return this._allBlocks[a];},_allBlocks:{}};;
/*---
/js/bs/visibleDialog.js
---*/
BS.AbstractVisibleDialog=OO.extend(BS.AbstractModalDialog,{alwaysReload:false,show:function(a){this.changed=false;var b=this;if(a){a.css("visibility","visible");}BS.ajaxUpdater(this.getDialogContainer(),this.getRequestUrl(),{method:"get",evalScripts:true,onComplete:function(){b.showCentered();b.bindCtrlEnterHandler(b.save.bind(b));b.updateButtons();if(a){a.css("visibility","hidden");}}});},save:function(){if(!this.canSave()){return false;}BS.Util.show(this.getLoadingElemId());var d=this.getFormElement();Form.disable(d);this.getObjectsOrder().value=this.getVisibleProjectsOrder();var a=this.getVisibleObjects().options;for(var b=0;b<a.length;b++){a[b].selected=true;}var e=BS.Util.serializeForm(d);var c=this;BS.ajaxRequest(d.action,{parameters:e,onComplete:function(){Form.enable(d);BS.Util.hide(c.getLoadingElemId());c.close();if(c.alwaysReload||c.changed){BS.reload(true);}}});return false;},canSave:function(){return true;},getVisibleProjectsOrder:function(){var a="";var b=this.getVisibleObjects().options;for(var c=0;c<b.length;c++){if(a.length>0){a+=",";}a+=b[c].getAttribute("value");}return a;},moveToVisible:function(){this.doMoveSelectedTo(this.getHiddenObjects(),this.getVisibleObjects(),this.visibleObjectsAreSorted());},moveToHidden:function(){var a=this.getHiddenObjectsFilter();var c=this.getVisibleObjects();var b=this.getHiddenObjects();if(a.value==a.defaultValue||a.value==""){this.doMoveSelectedTo(c,b,true);}else{a.value="";BS.InPlaceFilter.applyFilter(this.getHiddenObjectsId(),a,function(){this.doMoveSelectedTo(c,b,true);a.value=a.defaultValue;});}},moveUp:function(){this.moveSelected(this.getVisibleObjects(),-1);},moveDown:function(){this.moveSelected(this.getVisibleObjects(),1);},doMoveSelectedTo:function(c,b,a){this.doMoveTo(c,b,a);},doMoveTo:function(f,e,b){this.selectChildrenIfNeeded(f);this.changed=true;this.selectAll(e,false);var c=[];var d=this;this.iterateOptions(f,function(g){if(g.selected){var h=d.createCopy(g);if(b){d.insertToSorted(h,e);}else{e.appendChild(h);}c.push(g);}});for(var a=0;a<c.length;a++){f.removeChild(c[a]);}this.onChange();this.updateButtons();e.activate();},selectChildrenIfNeeded:function(i){var d,e,a=i.options.length;var l=[];for(d=0;d<a;++d){var g=i.options[d];if(g.selected){var f=parseInt(g.getAttribute("data-filter-data")||"0");var b=[];for(e=d+1;e<a;++e){var h=i.options[e],c=parseInt(h.getAttribute("data-filter-data")||"0");if(c>f){if(h.selected){b=[];break;}b.push(h);}else{break;}}if(b){for(e=0;e<b.length;++e){l.push(b[e]);}}}}for(d=0;d<l.length;++d){l[d].selected=true;}},selectAll:function(a,b){this.iterateOptions(a,function(c){c.selected=b;});},iterateOptions:function(a,c){for(var b=0;b<a.options.length;b++){c(a.options[b]);}},insertToSorted:function(d,a){if(d.className.indexOf("inplaceFiltered")==-1){d.className+=" inplaceFiltered";}var b=a.options;for(var c=0;c<b.length;c++){if(d.innerHTML.toLowerCase()<b[c].innerHTML.toLowerCase()){a.insertBefore(d,b[c]);return;}}a.appendChild(d);},createCopy:function(a){var b=document.createElement("option");b.value=a.value;b.innerHTML=a.innerHTML;b.selected=a.selected;b.className=a.className;return b;},moveSelected:function(g,a){var l=g.options;var c=a==1?l.length-1:0;var f=false;for(var b=0;b<l.length;b++){var j=l[c];if(j.selected){if(f){var h=this._findOption(j,l,c,a);if(!h){continue;}var e=this.createCopy(j);var d=this.createCopy(h);g.replaceChild(d,j);g.replaceChild(e,h);this.changed=true;}}else{f=true;}c-=a;}this.onChange();this.updateButtons();},_findOption:function(f,k,e,a){var c=parseInt(f.getAttribute("data-filter-data")||"0");for(var d=1;d<k.length;++d){var g=e+d*a;if(g<0||g>=k.length){return null;}var h=k[g],b=parseInt(h.getAttribute("data-filter-data")||"0");if(a<0&&c>b){return null;}if(a>0&&c>b&&c>0){return null;}if(c==b){return h;}}return null;},updateButtons:function(){this.getMoveToVisible().disabled=!this.hasSelection(this.getHiddenObjects());var a=this.hasSelection(this.getVisibleObjects());this.getMoveToHidden().disabled=!a;if(!this.visibleObjectsAreSorted()){this.getMoveVisibleUp().disabled=!a;this.getMoveVisibleDown().disabled=!a;}},visibleObjectsAreSorted:function(){return false;},hasSelection:function(a){var b=a.options;for(var c=0;c<b.length;c++){if(b[c].selected){return true;}}return false;},getContainer:function(){return $(this.getPrefix()+"visibleFormDialog");},getFormElement:function(){return $(this.getPrefix()+"visibleForm");},getDialogContainer:function(){return $(this.getPrefix()+"visibleDialogContainer");},getVisibleObjects:function(){return $(this.getPrefix()+"visible");},getHiddenObjectsId:function(){return this.getPrefix()+"hidden";},getHiddenObjects:function(){return $(this.getHiddenObjectsId());},getHiddenObjectsFilter:function(){return this.getHiddenObjectsId()+"_filter";},getObjectsOrder:function(){return $(this.getPrefix()+"order");},getLoadingElemId:function(){return this.getPrefix()+"savingVisible";},getMoveToVisible:function(){return $(this.getPrefix()+"moveToVisible");},getMoveToHidden:function(){return $(this.getPrefix()+"moveToHidden");},getMoveVisibleUp:function(){return $(this.getPrefix()+"moveVisibleUp");},getMoveVisibleDown:function(){return $(this.getPrefix()+"moveVisibleDown");},getPrefix:function(){},getRequestUrl:function(){},onChange:function(){}});BS.VisibleProjectsDialog=OO.extend(BS.AbstractVisibleDialog,{getPrefix:function(){return"projects_";},getRequestUrl:function(){return window["base_uri"]+"/visibleProjects.html?init=1";},onChange:function(){var a=window["base_uri"]+"/visibleProjects.html";BS.ajaxRequest(a,{method:"GET",parameters:{refresh:true,projects:this.getVisibleProjectsOrder()},onComplete:function(e){var d=e.responseText,c=$j(d);var g=$j("#projects_hidden").val(),b=$j("#projects_visible").val(),f=$j("#projects_hidden_filter").val();$j("#projects_visibleFormDialog .modalDialogBody").html(c.find("#projects_visibleFormDialog .modalDialogBody").html());$j("#projects_hidden").val(g);$j("#projects_visible").val(b);$j("#projects_hidden_filter").val(f);BS.InPlaceFilter.prevKeyword="";BS.InPlaceFilter.applyFilter("projects_hidden",$("projects_hidden_filter"));}});}});BS.VisibleBuildTypesDialog=OO.extend(BS.AbstractVisibleDialog,{projectExternalId:"",showForProject:function(b){this.projectExternalId=b;var a=$j("#vp_"+b);this.show(a);},getPrefix:function(){return"bt_";},getRequestUrl:function(){return window["base_uri"]+"/visibleBuildTypes.html?projectId="+this.projectExternalId;},canSave:function(){var b=this.getVisibleProjectsOrder();var a=b&&(b.length>0);if(!a){alert("Hiding all build configurations is not allowed");}return a;},resetAction:function(){if(!confirm("Your order settings will be reset to defaults. Are you sure?")){return;}var b=this;BS.Util.show(this.getLoadingElemId());var a=this.getFormElement();Form.disable(a);BS.ajaxRequest(a.action,{parameters:"reset=true",onComplete:function(){Form.enable(a);BS.Util.hide(b.getLoadingElemId());b.close();BS.reload(true);}});},showSingleBuildType:function(c,a){var b=window["base_uri"]+"/visibleBuildTypes.html";BS.ajaxRequest(b,{parameters:{projectId:c,bt_visible:a,showOne:"true"},onComplete:function(){BS.reload(true);}});return false;},_findOption:function(d,b,c,a){return b[c+a];}});BS.hideBuildType=function(b,d,a){var c=window["base_uri"]+"/visibleBuildTypes.html";BS.ajaxRequest(c,{parameters:{projectId:d,bt_visible:a,hideOne:"true"},onComplete:function(){jQuery(BS.Util.escapeId(a+"-div")).add(BS.Util.escapeId("btb"+a)).fadeOut(1000);var e=jQuery(BS.Util.escapeId("ph_"+b)).find(".hideProject .pc__label").contents().filter(function(){return this.nodeType==3;});var h=e.text();var g;if(h.indexOf("no")>=0){g="1 hidden";}else{var f=parseInt(h.split(" ")[0]);g=(f+1)+" hidden";}setTimeout(function(){var i=e.parent();i.prepend(g);e.remove();new Effect.Highlight(i[0]);},1100);}});return false;};;
/*---
/js/bs/queueLikeSorter.js
---*/
BS.QueueLikeSorter={containerId:null,getActionUrl:function(){},getActionParameters:function(b,a){},afterOrderSaving:function(){},_timoutHandle:null,scheduleUpdate:function(b,a){this.updateMoveTopIcons();if(this._timoutHandle){clearTimeout(this._timoutHandle);}this._timoutHandle=setTimeout(this.saveOrder.bind(this,b,a),1000);},updateMoveTopIcons:function(){var a=$(this.containerId);if(!a){return;}var c=a.select(".moveTopIcon");if(!c){return;}for(var b=0;b<c.length;b++){if(c[b]==null){continue;}if(b==0){c[b].style.visibility="hidden";}else{c[b].style.visibility="";}}},saveOrder:function(c,a){if(!c){return;}this.setOrderSaving(true);var b=this;BS.ajaxRequest(b.getActionUrl(),{parameters:b.getActionParameters(c,a),onComplete:function(e,d){b.setOrderSaving(false);b.afterOrderSaving();}});},setOrderSaving:function(a){if(a){BS.Util.hide("dataSaved");BS.Util.show("savingData");}else{window.setTimeout(function(){BS.Util.hide("savingData");BS.Util.show("dataSaved");window.setTimeout(function(){BS.Util.hide("dataSaved");},3000);},1000);}},moveToTop:function(c){var b=$(c);var a=b.parentNode;if(a.firstChild.id==b.id){return;}a.removeChild(b);a.insertBefore(b,a.firstChild);this.scheduleUpdate(a);},computeOrder:function(d,f,b){var e=[];if(b){e=$("buildQueueTable").select(b);}else{if(d.childNodes&&d.childNodes.length>0){$(d).cleanWhitespace();e=d.childNodes;}}var a="";for(var c=0;c<e.length;c++){var g=e[c].id;if(g.indexOf(f)!=0){continue;}a+=e[c].id.substring(f.length)+";";}return a;}};;
/*---
/js/bs/buildQueue.js
---*/
if(!BS.Queue){BS.Queue=OO.extend(BS.QueueLikeSorter,{containerId:"buildQueueTable",personalBuilds:[],getActionUrl:function(){return window["base_uri"]+"/queue.html";},getActionParameters:function(b,a){return"queueOrder="+this.computeOrder(b,"queue_",a);},afterOrderSaving:function(){var a=$("buildQueueContainer");a.refresh();},scheduleUpdate:function(c,a,d){this.updateMoveTopIcons();if(this._timoutHandle){clearTimeout(this._timoutHandle);}var b=function(){this.saveOrder(c,a);d&&d();}.bind(this);this._timoutHandle=setTimeout(b,1000);}});}BS.Queue=OO.extend(BS.AbstractWebForm,OO.extend(BS.AbstractModalDialog,_.extend(BS.Queue,{getContainer:function(){return $("removeFromQueueDialog");},formElement:function(){return $("removeFromQueue");},showRemoveDialog:function(a){this.formElement().removeFromQueue.value=a;this.formElement().comment.value=this.formElement().comment.defaultValue;this.showCentered();this.formElement().comment.focus();this.formElement().comment.select();this.bindCtrlEnterHandler(this.removeFromQueue.bind(this));},removeFromQueue:function(a){if(a){this.formElement().removeFromQueue.value=a;}if(this.formElement().comment.value==this.formElement().comment.defaultValue){this.formElement().comment.value="";}if(this.isVisible()){this.setOrderSaving(true);this.disable();}var b=this;BS.ajaxRequest(this.formElement().action,{parameters:this.serializeParameters(),onComplete:function(c){if(b.isVisible()){b.setOrderSaving(false);b.enable();b.close();}b.removeBuildTypeRow(b.formElement().removeFromQueue.value);if(BS.QueuedBuildsPopup&&BS.QueuedBuildsPopup.isShown()){BS.QueuedBuildsPopup.hidePopup();}}});return false;},removeBuildTypeRow:function(a){var e="queue_"+a;if(!$(e)){return;}var c=$(e).parentNode;c.removeChild($(e));var d=$j("#buildQueueTable tbody tr");if(d.length==0){$j("#buildQueueTable").remove();var b=$j("#notes");if(b!=undefined){b.html("<p>Build queue is empty.</p>");}return;}this.updateMoveTopIcons();BS.Queue.refreshEstimates();},refreshEstimates:function(){BS.Queue.requestNewQueueEstimates();},updateQueueEstimatesFromData:function(){for(var b in BS.QueueEstimates._estimates){var c=BS.QueueEstimates._estimates[b];var a=$("estimate"+b+":text");if(a){a.innerHTML=c!=null?c.getEstimate():"N/A";}}},requestNewQueueEstimates:function(){BS.ajaxRequest("queue.html?estimatesRequest=1",{onSuccess:function(b,a){b.responseText.evalScripts();BS.Queue.updateQueueEstimatesFromData();},method:"get"});},initEstimatesAutoupdate:function(){var a=function(){setTimeout(a,BS.internalProperty("teamcity.ui.buildQueueEstimates.pollInterval")*1000);BS.Queue.requestNewQueueEstimates();};a();},showBranchColumn:function(){if(this._branchShown){return;}$j("#buildQueueTable th.branch").addClass("hasBranch").html("Branch");this._branchShown=true;},showTagsColumn:function(){if(this._tagsShown){return;}$j("#buildQueueTable th.queuedBuildTags").addClass("hasTags").html("Tags");this._tagsShown=true;}})));BS.QueueFilter={filter:function(a){BS.QueueFilter._prepare();BS.QueueFilter._updateProperty(a,BS.QueueFilter._getValue($("queuePool")),{afterComplete:function(){$("buildQueueContainer").refresh();}});},resetFilter:function(a){BS.QueueFilter._prepare();BS.User.deleteProperty(a,{afterComplete:function(){$("buildQueueContainer").refresh();}});},_prepare:function(){BS.Util.show("queueFilterProgress");BS.Util.disableInputTemp($("queuePool"));},_getValue:function(a){return a.options[a.selectedIndex].value;},_updateProperty:function(b,c,a){if(c=="ALL"){BS.User.deleteProperty(b,a);}else{BS.User.setProperty(b,c,a);}}};BS.QueueEstimates={};BS.QueueEstimates._estimates={};BS.QueueEstimates.getEstimate=function(a){var b=this._estimates[a];if(b==null){return null;}return OO.extend(b,{getDescription:function(){var f="";if(this.secondsToStart==null){f="Cannot estimate this build<br/>";}else{if(this.secondsToStart>0){var e=this.getDurationAsString();if(e=="???"){e="";}else{e=" ("+e+")";}f=""+"Estimated start/finish: "+this.getTimeFrame()+e+"<br/>"+"Planned agent: "+this.getAgentLink()+"<br/>";}else{if(this.secondsToStart==0){f="The build should start shortly.<br/>";}}}if(this.isDelayed){var c=this.getBuildLink();var d=this.getAgentLink();if(c!=""&&d!=""){f+="Delayed by "+c+" on "+d+"<br/>";}f+="Expected build duration: "+this.getDurationAsString()+"<br/>";}if(this.getWaitReason()){f+="<em>"+this.getWaitReason()+"</em>";}return f;}});};$j(document).ready(function(){var g=function(i){var j=this.getAttribute("data-itemId");var k=BS.QueueEstimates.getEstimate(j);var h=k!=null?k.getDescription():"N/A";BS.Tooltip.showMessageAtCursor(i,{shift:{x:2,y:2}},h);};var e=function(){BS.Tooltip.hidePopup();};var c=function(){var h=BS.Util.getSelectedValues("buildQueueForm","removeItem");if(h.length>0){BS.blockRefreshPermanently();}else{BS.unblockRefresh();}};var b=function(){var h=$j(this).closest(".queueRowDragged");if(h.length>0){h.removeClass("queueRowDragged");return false;}return true;};var d="#buildQueueContainer td.remaining span.remaining, #queuedBuildsPopup td.remaining span.remaining, table.modificationBuilds td.remaining span.remaining";var a="#buildQueueContainer #removeItem, #buildQueueContainer #removeAll, #queuedBuildsPopup #removeItem, table.modificationBuilds #removeItem";var f="#buildQueueContainer #queueTableRows a, #queuedBuildsPopup #queueTableRows a";$j(document).on("mouseover",d,g).on("mouseout",d,e).on("click",a,c).on("click",f,b);});;
/*---
/js/bs/buildType.js
---*/
BS.BuildType={};BS.BuildType.updateView=function(){BS.reload(false,function(){$("buildConfigurationContainer").refresh();});};BS.BuildType.updateStatus=function(a){jQuery("#mainNavigation").children(".buildType").toggleClass("failed",a);};BS.BuildTypeResetSources=OO.extend(BS.AbstractWebForm,OO.extend(BS.AbstractModalDialog,{formElement:function(){return $("resetSources");},getContainer:function(){return $("resetSourcesDialog");},savingIndicator:function(){return $("resetSourcesProgress");},showResetSourcesDialog:function(){this.showCentered();this.bindCtrlEnterHandler(this.submitResetSources.bind(this));},submitResetSources:function(){if(this.formElement().agentId.selectedIndex==-1){alert("Please choose an agent.");return false;}var a=this;BS.FormSaver.save(this,this.formElement().action,OO.extend(BS.ErrorsAwareListener,{onCompleteSave:function(c,d,b){a.setSaving(false);a.enable();if(!b){a.close();BS.reload(true);}}}));return false;}}));BS.PauseBuildTypeDialog=OO.extend(BS.AbstractWebForm,OO.extend(BS.AbstractModalDialog,{formElement:function(){return $("pauseBuildTypeForm");},getContainer:function(){return $("pauseBuildTypeFormDialog");},onText:"Pause",offText:"Activate",showPauseBuildTypeDialog:function(a,c,b){if(BS.bcActions_handle!=null){BS.bcActions_handle.hidePopup(0);}var d=c?this.onText:this.offText;if(c){BS.Util.show("removeFromQueue");BS.Util.show("lbl_removeFromQueue");}else{BS.Util.hide("removeFromQueue");BS.Util.hide("lbl_removeFromQueue");}this.formElement().pause.value=c;this.formElement().pauseBuildType.value=a;this.formElement().PauseSubmitButton.value=d;$("pauseBuildTypeFormTitle").innerHTML=d+" build configuration";this.formElement().pauseComment.value=b!=null&&b.length>0?b:this.formElement().pauseComment.defaultValue;this.showCentered();this.formElement().pauseComment.focus();this.formElement().pauseComment.select();this.bindCtrlEnterHandler(this.submit.bind(this));},submit:function(){if(this.formElement().pauseComment.value==this.formElement().pauseComment.defaultValue){this.formElement().pauseComment.value="";}BS.Util.show("pauseProgressIcon");BS.FormSaver.save(this,this.formElement().action,OO.extend(BS.ErrorsAwareListener,{onCompleteSave:function(b,c,a){BS.Util.hide("pauseProgressIcon");BS.reload(true);},onFailure:function(){BS.Util.hide("pauseProgressIcon");alert("Problem accessing server");}}));return false;}}));;
/*---
/js/bs/problemsSummary.js
---*/
(function(a){BS.ProblemsSummary={_buildTypes:[],_lastUpdate:new Date().getTime(),_timeout:0,requestBuildTypeUpdate:function(b){if(this._buildTypes.indexOf(b)==-1){this._buildTypes.push(b);}this._scheduleUpdate();},requestUpdateAll:function(){var b=this;a("#overviewMain").find("div.tableCaption").each(function(){var d=this.id;var c=d.substr(0,d.length-4);b.requestBuildTypeUpdate(c);});},_scheduleUpdate:function(){if(!this._timeout){var b=this;var e=new Date().getTime()-b._lastUpdate;var d=BS.internalProperty("teamcity.ui.problemsSummary.pollInterval")*1000;var c=(e>d)?100:Math.max(100,d-e);this._timeout=setTimeout(this.update.bind(this),c);}},update:function(){var b=this._buildTypes;this._buildTypes=[];this._lastUpdate=new Date().getTime();this._timeout=0;if(!b.length){return;}var d=a.extend({getProblemsSummary:b.join(",")},BS.Branch.getAllBranchesFromUrl());var c=this;BS.ajaxRequest(window["base_uri"]+"/ajax.html",{parameters:d,onSuccess:function(k){var e=BS.Util.documentRoot(k);if(!e){return;}var g;var j=e.childNodes;for(g=0;g<j.length;++g){var h=j[g];c._doUpdateInUI(h);var f=h.getAttribute("btId");b.splice(a.inArray(f,b),1);}for(g=0;g<b.length;++g){c.hideSummaryFor(b[g]);}}});},_doUpdateInUI:function(b){var k=b.getAttribute("btId");var d=b.getAttribute("projectId");var f=b.getAttribute("failed");var j=b.getAttribute("invest");var c=b.getAttribute("fixed");var i=b.getAttribute("muted");var l=a("#"+k+"-div");var h=l.find(".problemsSummary");h.html("");if(f+j+c+i==0){return;}var e=h.length;if(!e){h=a('<span class="problemsSummary"/>').attr({title:"View problems summary for this build configuration"});}var g=a('<a class="summaryLink"/>').attr({href:window["base_uri"]+"/project.html?projectId="+d+"&tab=problems&buildTypeId="+k}).append("<span>Test<span class='problemDetails'> failure</span>s:</span> ");if(f>0){this._getSpan("/img/buildStates/buildFailed.png",f,"not investigated",j+c+i>0).appendTo(g);}if(j>0){this._getSpan("/img/investigate.png",j,"under investigation",c+i>0).appendTo(g);}if(c>0){this._getSpan("/img/buildStates/fixedTestResp.png",c,"marked as fixed",i>0).appendTo(g);}if(i>0){this._getSpan("/img/muted_red.png",i,"muted",false).appendTo(g);}g.appendTo(h);if(!e){h.appendTo(l);}},_getSpan:function(f,d,e,b){var c=a('<img class="problemIcon"/>').attr({src:window["base_uri"]+f,alt:""});var g=a('<span class="problemDetails"/>').html(e).append(b?", ":"");return a("<span/>").append(c).append(d).append(" ").append(g);},hideSummaryFor:function(b){a("#"+b+"-div").find(".problemsSummary").html("");}};})(jQuery);;